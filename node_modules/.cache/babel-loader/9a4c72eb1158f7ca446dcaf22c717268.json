{"ast":null,"code":"import _classCallCheck from \"/home/akash/Documents/conduit/conduit-real-world/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/akash/Documents/conduit/conduit-real-world/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/akash/Documents/conduit/conduit-real-world/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/akash/Documents/conduit/conduit-real-world/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/akash/Documents/conduit/conduit-real-world/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/akash/Documents/conduit/conduit-real-world/src/Stories.js\";\nimport React from \"react\";\nimport \"bulma\";\nimport \"./styles.css\"; // import axios from \"axios\";\n\nimport { Link } from \"react-router-dom\";\nimport customFetch from \"../customFetch\";\nimport Pagination from \"./Pagination\"; // import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nvar Stories =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Stories, _React$Component);\n\n  function Stories(props) {\n    var _this;\n\n    _classCallCheck(this, Stories);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Stories).call(this, props));\n\n    _this.fetchArticles = function () {\n      var filter = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var tag = filter.tag,\n          author = filter.author,\n          favorited = filter.favorited,\n          offset = filter.offset;\n\n      if (!_this.isYourFeed) {\n        var URL = \"https://conduit.productionready.io/api/articles?limit=10&offset=\".concat(offset || \"0\", \"&tag=\").concat(tag || \"\", \"&author=\").concat(author || \"\", \"&favorited=\").concat(favorited || \"\");\n        fetch(URL).then(function (res) {\n          return res.json();\n        }).then(function (data) {\n          var articles = data.articles,\n              articlesCount = data.articlesCount;\n\n          _this.setState({\n            articles: articles,\n            articlesCount: articlesCount,\n            isLoading: false\n          });\n        }).catch(function (error) {\n          return console.error(error);\n        });\n      } else {\n        var _URL = \"https://conduit.productionready.io/api/articles/feed?limit=10&offset=\".concat(offset || \"0\");\n\n        var token = \"Token \".concat(localStorage.token);\n        fetch(_URL, {\n          method: \"GET\",\n          mode: \"cors\",\n          cache: \"no-cache\",\n          credentials: \"same-origin\",\n          headers: {\n            Authorization: token,\n            \"Content-Type\": \"application/json\" // 'Content-Type': 'application/x-www-form-urlencoded',\n\n          },\n          redirect: \"follow\",\n          // manual, *follow, error\n          referrer: \"no-referrer\" // no-referrer, *client\n\n        }).then(function (response) {\n          return response.json();\n        }).then(function (data) {\n          var articles = data.articles,\n              articlesCount = data.articlesCount;\n\n          _this.setState({\n            articles: articles,\n            articlesCount: articlesCount,\n            isLoading: false\n          });\n        }).catch(function (error) {\n          return console.error(error);\n        });\n      }\n    };\n\n    _this.filterByItem = function (item) {\n      _this.isYourFeed = false;\n\n      _this.fetchArticles(item);\n    };\n\n    _this.setPage = function (page) {\n      _this.setState({\n        page: page\n      });\n    };\n\n    _this.setTag = function (tag) {\n      _this.setState({\n        tag: tag,\n        initailTab: \"tagFeed\",\n        isYourFeed: false\n      });\n    };\n\n    _this.state = {\n      articles: [],\n      isLoading: false,\n      tag: \"\",\n      articlesCount: 0,\n      page: 1,\n      initailTab: \"globalFeed\"\n    };\n    _this.isYourFeed = false;\n    return _this;\n  }\n\n  _createClass(Stories, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchArticles();\n    }\n  }, {\n    key: \"render\",\n    // handleTab = tab => {\n    //   this.setState({ initailTab: tab });\n    //   switch (tab) {\n    //     case \"yourFeed\":\n    //       this.isYourFeed = true;\n    //       this.fetchArticles();\n    //       break;\n    //     case \"globalFeed\":\n    //       this.filterByItem();\n    //       break;\n    //     case \"tagFeed\":\n    //       this.filterByItem({ tag: this.state.tag });\n    //       break;\n    //     default:\n    //       break;\n    //   }\n    // };\n    // componentDidMount() {\n    //   const url = `https://conduit.productionready.io/api/articles?offset=0`;\n    //   axios.get(url).then(res => {\n    //     const stories = res.data;\n    //     console.log(stories, \"in home\");\n    //     this.setState({\n    //       articles: stories.articles,\n    //       storiesCount: stories.articlesCount\n    //     });\n    //   });\n    // }\n    value: function render() {\n      var _this$state = this.state,\n          page = _this$state.page,\n          articlesCount = _this$state.articlesCount;\n      return React.createElement(React.Fragment, null, React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, this.state.articles.map(function (article, i) {\n        return React.createElement(\"article\", {\n          style: {\n            \"margin-bottom\": \"50px\"\n          },\n          className: \"media\",\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }, React.createElement(\"figure\", {\n          className: \"media-left\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          className: \"image is-64x64\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          className: \" is-responsive is-rounded\",\n          src: article.author.image,\n          alt: \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"media-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: {\n            pathname: \"/authorProfile\",\n            state: {\n              username: article.author.username\n            }\n          },\n          className: \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          },\n          __self: this\n        }, article.author.username)), React.createElement(\"p\", {\n          className: \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        }, React.createElement(\"em\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, Date(article.updatedAt).slice(0, 15))))), React.createElement(Link, {\n          to: \"/article/\".concat(article.slug),\n          className: \"article-link\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164\n          },\n          __self: this\n        }, React.createElement(\"h4\", {\n          className: \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165\n          },\n          __self: this\n        }, article.title), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166\n          },\n          __self: this\n        }, article.description.length > 70 ? \"\".concat(article.description.slice(0, 70), \"...\") : article.description)), React.createElement(\"small\", {\n          className: \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172\n          },\n          __self: this\n        }, \"Read More...\"))), React.createElement(\"div\", {\n          className: \"media-right\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175\n          },\n          __self: this\n        }, React.createElement(ArticleLike, {\n          article: article,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176\n          },\n          __self: this\n        })));\n      })), React.createElement(Pagination, {\n        count: articlesCount,\n        filterByPage: this.fetchArticles,\n        setPage: this.setPage,\n        page: page,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Stories;\n}(React.Component);\n\nexport { Stories as default };\n\nvar ArticleLike =\n/*#__PURE__*/\nfunction (_React$Component2) {\n  _inherits(ArticleLike, _React$Component2);\n\n  function ArticleLike(props) {\n    var _this2;\n\n    _classCallCheck(this, ArticleLike);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(ArticleLike).call(this, props));\n    _this2.state = {\n      likes: props.article.favoritesCount,\n      fav: props.article.favorited\n    };\n    return _this2;\n  }\n\n  _createClass(ArticleLike, [{\n    key: \"clickLike\",\n    value: function clickLike(slug, fav) {\n      var _this3 = this;\n\n      var url = \"https://conduit.productionready.io/api/articles/\".concat(slug, \"/favorite\");\n      var mode = this.state.fav ? \"DELETE\" : \"POST\";\n      var token = \"Token \".concat(localStorage.token);\n      customFetch(url, null, token, mode).then(function (data) {\n        if (!data.errors) {\n          var _data$article = data.article,\n              favoritesCount = _data$article.favoritesCount,\n              favorited = _data$article.favorited;\n\n          _this3.setState({\n            likes: favoritesCount,\n            fav: favorited\n          });\n        } else {\n          _this3.setState({\n            message: \"email or password is invalid\"\n          });\n        }\n      }).catch(function (error) {\n        return console.error(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$props$article = this.props.article,\n          slug = _this$props$article.slug,\n          favorited = _this$props$article.favorited;\n      return React.createElement(\"button\", {\n        onClick: function onClick() {\n          return _this4.clickLike(slug, favorited);\n        },\n        className: \"button is-success is-outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"icon is-small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"far fa-thumbs-up\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      })), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, this.state.likes));\n    }\n  }]);\n\n  return ArticleLike;\n}(React.Component); // to={`/article/${article.slug}`}","map":{"version":3,"sources":["/home/akash/Documents/conduit/conduit-real-world/src/Stories.js"],"names":["React","Link","customFetch","Pagination","Stories","props","fetchArticles","filter","tag","author","favorited","offset","isYourFeed","URL","fetch","then","res","json","data","articles","articlesCount","setState","isLoading","catch","error","console","token","localStorage","method","mode","cache","credentials","headers","Authorization","redirect","referrer","response","filterByItem","item","setPage","page","setTag","initailTab","state","map","article","i","image","pathname","username","Date","updatedAt","slice","slug","title","description","length","Component","ArticleLike","likes","favoritesCount","fav","url","errors","message","clickLike"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"bulma\";\nimport \"./styles.css\";\n\n// import axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport customFetch from \"../customFetch\";\nimport Pagination from \"./Pagination\";\n// import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nexport default class Stories extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      articles: [],\n      isLoading: false,\n      tag: \"\",\n      articlesCount: 0,\n      page: 1,\n      initailTab: \"globalFeed\"\n    };\n    this.isYourFeed = false;\n  }\n\n  componentDidMount() {\n    this.fetchArticles();\n  }\n\n  fetchArticles = (filter = {}) => {\n    const { tag, author, favorited, offset } = filter;\n\n    if (!this.isYourFeed) {\n      const URL = `https://conduit.productionready.io/api/articles?limit=10&offset=${offset ||\n        \"0\"}&tag=${tag || \"\"}&author=${author || \"\"}&favorited=${favorited ||\n        \"\"}`;\n\n      fetch(URL)\n        .then(res => res.json())\n        .then(data => {\n          const { articles, articlesCount } = data;\n          this.setState({ articles, articlesCount, isLoading: false });\n        })\n        .catch(error => console.error(error));\n    } else {\n      const URL = `https://conduit.productionready.io/api/articles/feed?limit=10&offset=${offset ||\n        \"0\"}`;\n      const token = `Token ${localStorage.token}`;\n\n      fetch(URL, {\n        method: \"GET\",\n        mode: \"cors\",\n        cache: \"no-cache\",\n        credentials: \"same-origin\",\n        headers: {\n          Authorization: token,\n          \"Content-Type\": \"application/json\"\n          // 'Content-Type': 'application/x-www-form-urlencoded',\n        },\n        redirect: \"follow\", // manual, *follow, error\n        referrer: \"no-referrer\" // no-referrer, *client\n      })\n        .then(response => response.json())\n        .then(data => {\n          const { articles, articlesCount } = data;\n          this.setState({ articles, articlesCount, isLoading: false });\n        })\n        .catch(error => console.error(error));\n    }\n  };\n\n  filterByItem = item => {\n    this.isYourFeed = false;\n    this.fetchArticles(item);\n  };\n\n  setPage = page => {\n    this.setState({ page });\n  };\n\n  setTag = tag => {\n    this.setState({ tag, initailTab: \"tagFeed\", isYourFeed: false });\n  };\n\n  // handleTab = tab => {\n  //   this.setState({ initailTab: tab });\n  //   switch (tab) {\n  //     case \"yourFeed\":\n  //       this.isYourFeed = true;\n  //       this.fetchArticles();\n  //       break;\n  //     case \"globalFeed\":\n  //       this.filterByItem();\n  //       break;\n  //     case \"tagFeed\":\n  //       this.filterByItem({ tag: this.state.tag });\n  //       break;\n\n  //     default:\n  //       break;\n  //   }\n  // };\n\n  // componentDidMount() {\n  //   const url = `https://conduit.productionready.io/api/articles?offset=0`;\n  //   axios.get(url).then(res => {\n  //     const stories = res.data;\n  //     console.log(stories, \"in home\");\n  //     this.setState({\n  //       articles: stories.articles,\n  //       storiesCount: stories.articlesCount\n  //     });\n  //   });\n  // }\n\n  render() {\n    const {\n      // articles,\n      // isLoading,\n      page,\n      // tag,\n      articlesCount\n      // initailTab\n    } = this.state;\n    return (\n      <>\n        <ul>\n          {this.state.articles.map((article, i) => (\n            <article\n              style={{ \"margin-bottom\": \"50px\" }}\n              className=\"media\"\n              key={i}\n            >\n              <figure className=\"media-left\">\n                <p className=\"image is-64x64\">\n                  <img\n                    className=\" is-responsive is-rounded\"\n                    src={article.author.image}\n                    alt=\"\"\n                  />\n                </p>\n              </figure>\n              <div className=\"media-content\">\n                <div className=\"content\">\n                  <div>\n                    <span>\n                      <Link\n                        to={{\n                          pathname: \"/authorProfile\",\n                          state: {\n                            username: article.author.username\n                          }\n                        }}\n                        className=\"\"\n                      >\n                        {article.author.username}\n                      </Link>\n                    </span>\n                    <p className=\"\">\n                      <em>{Date(article.updatedAt).slice(0, 15)}</em>\n                    </p>\n                  </div>\n                </div>\n                <Link to={`/article/${article.slug}`} className=\"article-link\">\n                  <div className=\"\">\n                    <h4 className=\"\">{article.title}</h4>\n                    <p>\n                      {article.description.length > 70\n                        ? `${article.description.slice(0, 70)}...`\n                        : article.description}\n                    </p>\n                  </div>\n                  <small className=\"\">Read More...</small>\n                </Link>\n              </div>\n              <div className=\"media-right\">\n                <ArticleLike article={article} />\n              </div>\n            </article>\n          ))}\n        </ul>\n        {/* <Pagination i={this.state.storiesCount} /> */}\n        <Pagination\n          count={articlesCount}\n          filterByPage={this.fetchArticles}\n          setPage={this.setPage}\n          page={page}\n        />\n      </>\n    );\n  }\n}\n\nclass ArticleLike extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      likes: props.article.favoritesCount,\n      fav: props.article.favorited\n    };\n  }\n\n  clickLike(slug, fav) {\n    const url = `https://conduit.productionready.io/api/articles/${slug}/favorite`;\n    const mode = this.state.fav ? \"DELETE\" : \"POST\";\n    const token = `Token ${localStorage.token}`;\n\n    customFetch(url, null, token, mode)\n      .then(data => {\n        if (!data.errors) {\n          const { favoritesCount, favorited } = data.article;\n          this.setState({ likes: favoritesCount, fav: favorited });\n        } else {\n          this.setState({ message: \"email or password is invalid\" });\n        }\n      })\n      .catch(error => console.error(error));\n  }\n\n  render() {\n    const { slug, favorited } = this.props.article;\n    return (\n      <button\n        onClick={() => this.clickLike(slug, favorited)}\n        className=\"button is-success is-outlined\"\n      >\n        <span className=\"icon is-small\">\n          <i class=\"far fa-thumbs-up\" />\n        </span>\n        <span>{this.state.likes}</span>\n      </button>\n    );\n  }\n}\n\n// to={`/article/${article.slug}`}\n"]},"metadata":{},"sourceType":"module"}