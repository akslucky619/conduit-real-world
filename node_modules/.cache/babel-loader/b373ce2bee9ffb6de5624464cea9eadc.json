{"ast":null,"code":"import _toConsumableArray from \"/home/akash/Documents/conduit/conduit-real-world/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/home/akash/Documents/conduit/conduit-real-world/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/akash/Documents/conduit/conduit-real-world/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/akash/Documents/conduit/conduit-real-world/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/akash/Documents/conduit/conduit-real-world/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/akash/Documents/conduit/conduit-real-world/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/akash/Documents/conduit/conduit-real-world/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/akash/Documents/conduit/conduit-real-world/src/SingleArt.js\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Header from \"./Header\"; // import CommentPost from \"./CommentPost\";\n\nvar SingleArt =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SingleArt, _React$Component);\n\n  function SingleArt() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SingleArt);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SingleArt)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      article: {},\n      comments: [],\n      body: \"\",\n      user: \"\"\n    };\n\n    _this.componentDidMount = function () {\n      var slug = _this.props.match.params.slug;\n      fetch(\"https://conduit.productionready.io/api/articles/\".concat(slug), {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\" // Authorization: `Token ${localStorage.token}`\n\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (_ref) {\n        var article = _ref.article;\n        console.log(article, \"in single art\");\n\n        _this.setState({\n          article: article\n        });\n      });\n      fetch(\"https://conduit.productionready.io/api/articles/\".concat(slug, \"/comments\\n      \"), {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\" // Authorization: `Token ${localStorage.token}`\n\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (comments) {\n        console.log(comments.comments, \"inside comments\");\n\n        _this.setState({\n          comments: comments.comments\n        });\n      });\n    };\n\n    _this.handleChange = function (_ref2) {\n      var _ref2$target = _ref2.target,\n          name = _ref2$target.name,\n          value = _ref2$target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.postComent = function () {\n      var data = {\n        comment: {\n          body: _this.state.body\n        }\n      };\n      var slug = _this.props.match.params.slug;\n      fetch(\"https://conduit.productionready.io/api/articles/\".concat(slug, \"/comments\"), {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Token \".concat(localStorage.token)\n        },\n        body: JSON.stringify(data)\n      }).then(function (res) {\n        return res.json();\n      }).then(function (_ref3) {\n        var comment = _ref3.comment;\n\n        _this.setState({\n          comments: [].concat(_toConsumableArray(_this.state.comments), [comment])\n        });\n      });\n\n      _this.setState({\n        body: \"\"\n      });\n    };\n\n    _this.handleDelete = function (commentID) {\n      var slug = _this.props.match.params.slug;\n      fetch(\"https://conduit.productionready.io/api/articles/\".concat(slug, \"/comments/\").concat(commentID), {\n        method: \"DELETE\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Token \".concat(localStorage.token)\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (comment) {\n        console.log(comment, \"in delete\");\n\n        var deletedItems = _this.state.comments.filter(function (comment) {\n          return comment.id !== commentID;\n        });\n\n        console.log(deletedItems, \"check deleteitem\");\n\n        _this.setState({\n          comments: deletedItems\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(SingleArt, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          article = _this$state.article,\n          comments = _this$state.comments,\n          body = _this$state.body;\n      console.log(article, \"check artcle wala author\");\n      var user = JSON.parse(localStorage.user);\n      console.log(comments, \"check cmments\");\n      return React.createElement(React.Fragment, null, React.createElement(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }), Object.keys(article).length ? React.createElement(React.Fragment, null, React.createElement(\"section\", {\n        className: \"hero is-small is-success is-bold\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"hero-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container hero-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"title is-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, this.state.article.title), React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, \"By..\"), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: {\n          pathname: \"/authorProfile\",\n          state: {\n            username: this.state.article.author.username\n          }\n        },\n        className: \"subtitle is-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, article.author.username)), article.author.username === user.username ? React.createElement(Link, {\n        to: \"/editArticle/\".concat(article.slug),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"Edit\") : \"\"))), React.createElement(\"section\", {\n        className: \"base column is-8 is-offset-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"content is-medium\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"article-main media\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, article.body)), React.createElement(\"div\", {\n        className: \"tags\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, article.tagList ? article.tagList.map(function (tag, i) {\n        return React.createElement(\"span\", {\n          key: i,\n          className: \"tag\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147\n          },\n          __self: this\n        }, tag);\n      }) : React.createElement(React.Fragment, null)), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }))) : React.createElement(React.Fragment, null, React.createElement(\"section\", {\n        className: \"hero is-small is-success is-bold\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"hero-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container hero-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, \"Loading...\"))))), React.createElement(\"section\", {\n        className: \"column is-6 is-offset-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, localStorage.token ? React.createElement(\"article\", {\n        class: \"media\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"media-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"field\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        class: \"control\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(\"textarea\", {\n        class: \"textarea\",\n        onChange: this.handleChange,\n        value: this.state.body,\n        name: \"body\",\n        placeholder: \"Add a comment...\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, body))), React.createElement(\"nav\", {\n        class: \"level\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"level-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"level-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        class: \"button is-info\",\n        onClick: this.postComent,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, \"Submit\")))))) : \"\"), React.createElement(\"section\", {\n        className: \"column is-6 is-offset-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, comments ? comments.reverse().map(function (comment, i) {\n        return React.createElement(\"article\", {\n          key: i,\n          className: \"media comment-box\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 206\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"media-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 207\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"field\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 208\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          className: \"control\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 209\n          },\n          __self: this\n        }, React.createElement(\"textarea\", {\n          style: {\n            border: \"none\"\n          },\n          className: \"textarea old-comment\",\n          value: comment.body,\n          placeholder: \"Add a comment...\",\n          rows: \"3\",\n          readOnly: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 210\n          },\n          __self: this\n        }))), React.createElement(\"nav\", {\n          className: \"level comment-footer\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"level-left\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 221\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"media commnet-media\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 222\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"media-left\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 223\n          },\n          __self: this\n        }, React.createElement(\"figure\", {\n          className: \"image is-32x32\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 224\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          className: \" is-responsive is-rounded\",\n          src: comment.author.image || \"https://bulma.io/images/placeholders/96x96.png\",\n          alt: \"author avatar\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 225\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"v-center media-content is-small\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 235\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: {\n            pathname: \"/authorProfile\",\n            state: {\n              username: comment.author.username\n            }\n          },\n          className: \"green-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 236\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"green-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 245\n          },\n          __self: this\n        }, comment.author.username)), React.createElement(\"span\", {\n          className: \"thin-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 249\n          },\n          __self: this\n        }, React.createElement(\"em\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 250\n          },\n          __self: this\n        }, Date(comment.createdAt).slice(0, 15)))))), React.createElement(\"div\", {\n          className: \"level-right\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 273\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"level-item\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 274\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"level-item\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 275\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"button is-text\",\n          onClick: function onClick() {\n            return _this2.handleDelete(comment.id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 276\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"icon is-small\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 280\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"fas fa-trash-alt\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 281\n          },\n          __self: this\n        })))))))));\n      }) : \"\"));\n    }\n  }]);\n\n  return SingleArt;\n}(React.Component);\n\nexport default SingleArt;","map":{"version":3,"sources":["/home/akash/Documents/conduit/conduit-real-world/src/SingleArt.js"],"names":["React","Link","Header","SingleArt","state","article","comments","body","user","componentDidMount","slug","props","match","params","fetch","method","headers","then","res","json","console","log","setState","handleChange","target","name","value","postComent","data","comment","Authorization","localStorage","token","JSON","stringify","handleDelete","commentID","deletedItems","filter","id","parse","Object","keys","length","title","pathname","username","author","tagList","map","tag","i","reverse","border","image","Date","createdAt","slice","Component"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,MAAP,MAAmB,UAAnB,C,CACA;;IAEMC,S;;;;;;;;;;;;;;;;;UACJC,K,GAAQ;AACNC,MAAAA,OAAO,EAAE,EADH;AAENC,MAAAA,QAAQ,EAAE,EAFJ;AAGNC,MAAAA,IAAI,EAAE,EAHA;AAINC,MAAAA,IAAI,EAAE;AAJA,K;;UAORC,iB,GAAoB,YAAM;AAAA,UAChBC,IADgB,GACP,MAAKC,KAAL,CAAWC,KAAX,CAAiBC,MADV,CAChBH,IADgB;AAExBI,MAAAA,KAAK,2DAAoDJ,IAApD,GAA4D;AAC/DK,QAAAA,MAAM,EAAE,KADuD;AAE/DC,QAAAA,OAAO,EAAE;AACP,0BAAgB,kBADT,CAEP;;AAFO;AAFsD,OAA5D,CAAL,CAOGC,IAPH,CAOQ,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OAPX,EAQGF,IARH,CAQQ,gBAAiB;AAAA,YAAdZ,OAAc,QAAdA,OAAc;AACrBe,QAAAA,OAAO,CAACC,GAAR,CAAYhB,OAAZ,EAAqB,eAArB;;AACA,cAAKiB,QAAL,CAAc;AAAEjB,UAAAA,OAAO,EAAEA;AAAX,SAAd;AACD,OAXH;AAYAS,MAAAA,KAAK,2DACgDJ,IADhD,wBAGH;AACEK,QAAAA,MAAM,EAAE,KADV;AAEEC,QAAAA,OAAO,EAAE;AACP,0BAAgB,kBADT,CAEP;;AAFO;AAFX,OAHG,CAAL,CAWGC,IAXH,CAWQ,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OAXX,EAYGF,IAZH,CAYQ,UAAAX,QAAQ,EAAI;AAChBc,QAAAA,OAAO,CAACC,GAAR,CAAYf,QAAQ,CAACA,QAArB,EAA+B,iBAA/B;;AACA,cAAKgB,QAAL,CAAc;AAAEhB,UAAAA,QAAQ,EAAEA,QAAQ,CAACA;AAArB,SAAd;AACD,OAfH;AAgBD,K;;UAEDiB,Y,GAAe,iBAAiC;AAAA,+BAA9BC,MAA8B;AAAA,UAApBC,IAAoB,gBAApBA,IAAoB;AAAA,UAAdC,KAAc,gBAAdA,KAAc;;AAC9C,YAAKJ,QAAL,qBACGG,IADH,EACUC,KADV;AAGD,K;;UAEDC,U,GAAa,YAAM;AACjB,UAAMC,IAAI,GAAG;AACXC,QAAAA,OAAO,EAAE;AACPtB,UAAAA,IAAI,EAAE,MAAKH,KAAL,CAAWG;AADV;AADE,OAAb;AADiB,UAMTG,IANS,GAMA,MAAKC,KAAL,CAAWC,KAAX,CAAiBC,MANjB,CAMTH,IANS;AAOjBI,MAAAA,KAAK,2DAAoDJ,IAApD,gBAAqE;AACxEK,QAAAA,MAAM,EAAE,MADgE;AAExEC,QAAAA,OAAO,EAAE;AACP,0BAAgB,kBADT;AAEPc,UAAAA,aAAa,kBAAWC,YAAY,CAACC,KAAxB;AAFN,SAF+D;AAMxEzB,QAAAA,IAAI,EAAE0B,IAAI,CAACC,SAAL,CAAeN,IAAf;AANkE,OAArE,CAAL,CAQGX,IARH,CAQQ,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OARX,EASGF,IATH,CASQ,iBAAiB;AAAA,YAAdY,OAAc,SAAdA,OAAc;;AACrB,cAAKP,QAAL,CAAc;AACZhB,UAAAA,QAAQ,+BAAM,MAAKF,KAAL,CAAWE,QAAjB,IAA2BuB,OAA3B;AADI,SAAd;AAGD,OAbH;;AAcA,YAAKP,QAAL,CAAc;AACZf,QAAAA,IAAI,EAAE;AADM,OAAd;AAGD,K;;UAED4B,Y,GAAe,UAAAC,SAAS,EAAI;AAAA,UAClB1B,IADkB,GACT,MAAKC,KAAL,CAAWC,KAAX,CAAiBC,MADR,CAClBH,IADkB;AAE1BI,MAAAA,KAAK,2DACgDJ,IADhD,uBACiE0B,SADjE,GAEH;AACErB,QAAAA,MAAM,EAAE,QADV;AAEEC,QAAAA,OAAO,EAAE;AACP,0BAAgB,kBADT;AAEPc,UAAAA,aAAa,kBAAWC,YAAY,CAACC,KAAxB;AAFN;AAFX,OAFG,CAAL,CAUGf,IAVH,CAUQ,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OAVX,EAWGF,IAXH,CAWQ,UAAAY,OAAO,EAAI;AACfT,QAAAA,OAAO,CAACC,GAAR,CAAYQ,OAAZ,EAAqB,WAArB;;AACA,YAAMQ,YAAY,GAAG,MAAKjC,KAAL,CAAWE,QAAX,CAAoBgC,MAApB,CACnB,UAAAT,OAAO;AAAA,iBAAIA,OAAO,CAACU,EAAR,KAAeH,SAAnB;AAAA,SADY,CAArB;;AAGAhB,QAAAA,OAAO,CAACC,GAAR,CAAYgB,YAAZ,EAA0B,kBAA1B;;AACA,cAAKf,QAAL,CAAc;AACZhB,UAAAA,QAAQ,EAAE+B;AADE,SAAd;AAGD,OApBH;AAqBD,K;;;;;;;6BACQ;AAAA;;AAAA,wBAC6B,KAAKjC,KADlC;AAAA,UACCC,OADD,eACCA,OADD;AAAA,UACUC,QADV,eACUA,QADV;AAAA,UACoBC,IADpB,eACoBA,IADpB;AAEPa,MAAAA,OAAO,CAACC,GAAR,CAAYhB,OAAZ,EAAqB,0BAArB;AACA,UAAMG,IAAI,GAAGyB,IAAI,CAACO,KAAL,CAAWT,YAAY,CAACvB,IAAxB,CAAb;AACAY,MAAAA,OAAO,CAACC,GAAR,CAAYf,QAAZ,EAAsB,eAAtB;AACA,aACE,0CACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEGmC,MAAM,CAACC,IAAP,CAAYrC,OAAZ,EAAqBsC,MAArB,GACC,0CACE;AAAS,QAAA,SAAS,EAAC,kCAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,0BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAI,QAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA4B,KAAKvC,KAAL,CAAWC,OAAX,CAAmBuC,KAA/C,CADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AACE,QAAA,EAAE,EAAE;AACFC,UAAAA,QAAQ,EAAE,gBADR;AAEFzC,UAAAA,KAAK,EAAE;AACL0C,YAAAA,QAAQ,EAAE,KAAK1C,KAAL,CAAWC,OAAX,CAAmB0C,MAAnB,CAA0BD;AAD/B;AAFL,SADN;AAOE,QAAA,SAAS,EAAC,eAPZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SASGzC,OAAO,CAAC0C,MAAR,CAAeD,QATlB,CADF,CAHF,EAgBGzC,OAAO,CAAC0C,MAAR,CAAeD,QAAf,KAA4BtC,IAAI,CAACsC,QAAjC,GACC,oBAAC,IAAD;AAAM,QAAA,EAAE,yBAAkBzC,OAAO,CAACK,IAA1B,CAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADD,GAGC,EAnBJ,CADF,CADF,CADF,EA2BE;AAAS,QAAA,SAAS,EAAC,8BAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAG,QAAA,SAAS,EAAC,oBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAmCL,OAAO,CAACE,IAA3C,CADF,CADF,EAKE;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGF,OAAO,CAAC2C,OAAR,GACC3C,OAAO,CAAC2C,OAAR,CAAgBC,GAAhB,CAAoB,UAACC,GAAD,EAAMC,CAAN,EAAY;AAC9B,eACE;AAAM,UAAA,GAAG,EAAEA,CAAX;AAAc,UAAA,SAAS,EAAC,KAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACGD,GADH,CADF;AAKD,OAND,CADD,GASC,yCAVJ,CALF,EAkBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAlBF,CA3BF,CADD,GAkDC,0CACE;AAAS,QAAA,SAAS,EAAC,kCAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,0BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,CADF,CADF,CADF,CApDJ,EA8DE;AAAS,QAAA,SAAS,EAAC,yBAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGnB,YAAY,CAACC,KAAb,GAED;AAAS,QAAA,KAAK,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,KAAK,EAAC,eAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,KAAK,EAAC,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAG,QAAA,KAAK,EAAC,SAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,KAAK,EAAC,UADR;AAEE,QAAA,QAAQ,EAAE,KAAKT,YAFjB;AAGE,QAAA,KAAK,EAAE,KAAKnB,KAAL,CAAWG,IAHpB;AAIE,QAAA,IAAI,EAAC,MAJP;AAKE,QAAA,WAAW,EAAC,kBALd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAOGA,IAPH,CADF,CADF,CADF,EAcE;AAAK,QAAA,KAAK,EAAC,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,KAAK,EAAC,YAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,KAAK,EAAC,YAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAQ,QAAA,KAAK,EAAC,gBAAd;AAA+B,QAAA,OAAO,EAAE,KAAKoB,UAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,CADF,CADF,CAdF,CADF,CAFC,GA6BC,EA9BJ,CA9DF,EA+FE;AAAS,QAAA,SAAS,EAAC,yBAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGrB,QAAQ,GACLA,QAAQ,CAAC8C,OAAT,GAAmBH,GAAnB,CAAuB,UAACpB,OAAD,EAAUsB,CAAV;AAAA,eACrB;AAAS,UAAA,GAAG,EAAEA,CAAd;AAAiB,UAAA,SAAS,EAAC,mBAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAK,UAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAK,UAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAG,UAAA,SAAS,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AACE,UAAA,KAAK,EAAE;AAAEE,YAAAA,MAAM,EAAE;AAAV,WADT;AAEE,UAAA,SAAS,EAAC,sBAFZ;AAGE,UAAA,KAAK,EAAExB,OAAO,CAACtB,IAHjB;AAIE,UAAA,WAAW,EAAC,kBAJd;AAKE,UAAA,IAAI,EAAC,GALP;AAME,UAAA,QAAQ,MANV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,CADF,CADF,EAaE;AAAK,UAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAK,UAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAK,UAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAK,UAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAQ,UAAA,SAAS,EAAC,gBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AACE,UAAA,SAAS,EAAC,2BADZ;AAEE,UAAA,GAAG,EACDsB,OAAO,CAACkB,MAAR,CAAeO,KAAf,IACA,gDAJJ;AAME,UAAA,GAAG,EAAC,eANN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,CADF,CADF,EAaE;AAAK,UAAA,SAAS,EAAC,iCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE,oBAAC,IAAD;AACE,UAAA,EAAE,EAAE;AACFT,YAAAA,QAAQ,EAAE,gBADR;AAEFzC,YAAAA,KAAK,EAAE;AACL0C,cAAAA,QAAQ,EAAEjB,OAAO,CAACkB,MAAR,CAAeD;AADpB;AAFL,WADN;AAOE,UAAA,SAAS,EAAC,YAPZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WASE;AAAM,UAAA,SAAS,EAAC,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACGjB,OAAO,CAACkB,MAAR,CAAeD,QADlB,CATF,CADF,EAcE;AAAM,UAAA,SAAS,EAAC,WAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAKS,IAAI,CAAC1B,OAAO,CAAC2B,SAAT,CAAJ,CAAwBC,KAAxB,CAA8B,CAA9B,EAAiC,EAAjC,CAAL,CADF,CAdF,CAbF,CADF,CADF,EAqDE;AAAK,UAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAK,UAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAK,UAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AACE,UAAA,SAAS,EAAC,gBADZ;AAEE,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAI,CAACtB,YAAL,CAAkBN,OAAO,CAACU,EAA1B,CAAN;AAAA,WAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAIE;AAAM,UAAA,SAAS,EAAC,eAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAG,UAAA,SAAS,EAAC,kBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,CAJF,CADF,CADF,CADF,CArDF,CAbF,CADF,CADqB;AAAA,OAAvB,CADK,GAuFL,EAxFN,CA/FF,CADF;AA4LD;;;;EAjSqBvC,KAAK,CAAC0D,S;;AAoS9B,eAAevD,SAAf","sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Header from \"./Header\";\n// import CommentPost from \"./CommentPost\";\n\nclass SingleArt extends React.Component {\n  state = {\n    article: {},\n    comments: [],\n    body: \"\",\n    user: \"\"\n  };\n\n  componentDidMount = () => {\n    const { slug } = this.props.match.params;\n    fetch(`https://conduit.productionready.io/api/articles/${slug}`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n        // Authorization: `Token ${localStorage.token}`\n      }\n    })\n      .then(res => res.json())\n      .then(({ article }) => {\n        console.log(article, \"in single art\");\n        this.setState({ article: article });\n      });\n    fetch(\n      `https://conduit.productionready.io/api/articles/${slug}/comments\n      `,\n      {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n          // Authorization: `Token ${localStorage.token}`\n        }\n      }\n    )\n      .then(res => res.json())\n      .then(comments => {\n        console.log(comments.comments, \"inside comments\");\n        this.setState({ comments: comments.comments });\n      });\n  };\n\n  handleChange = ({ target: { name, value } }) => {\n    this.setState({\n      [name]: value\n    });\n  };\n\n  postComent = () => {\n    const data = {\n      comment: {\n        body: this.state.body\n      }\n    };\n    const { slug } = this.props.match.params;\n    fetch(`https://conduit.productionready.io/api/articles/${slug}/comments`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Token ${localStorage.token}`\n      },\n      body: JSON.stringify(data)\n    })\n      .then(res => res.json())\n      .then(({ comment }) => {\n        this.setState({\n          comments: [...this.state.comments, comment]\n        });\n      });\n    this.setState({\n      body: \"\"\n    });\n  };\n\n  handleDelete = commentID => {\n    const { slug } = this.props.match.params;\n    fetch(\n      `https://conduit.productionready.io/api/articles/${slug}/comments/${commentID}`,\n      {\n        method: \"DELETE\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Token ${localStorage.token}`\n        }\n      }\n    )\n      .then(res => res.json())\n      .then(comment => {\n        console.log(comment, \"in delete\");\n        const deletedItems = this.state.comments.filter(\n          comment => comment.id !== commentID\n        );\n        console.log(deletedItems, \"check deleteitem\");\n        this.setState({\n          comments: deletedItems\n        });\n      });\n  };\n  render() {\n    const { article, comments, body } = this.state;\n    console.log(article, \"check artcle wala author\");\n    const user = JSON.parse(localStorage.user);\n    console.log(comments, \"check cmments\");\n    return (\n      <>\n        <Header />\n        {Object.keys(article).length ? (\n          <>\n            <section className=\"hero is-small is-success is-bold\">\n              <div className=\"hero-body\">\n                <div className=\"container hero-container\">\n                  <h1 className=\"title is-1\">{this.state.article.title}</h1>\n                  <h3>By..</h3>\n                  <h2>\n                    <Link\n                      to={{\n                        pathname: \"/authorProfile\",\n                        state: {\n                          username: this.state.article.author.username\n                        }\n                      }}\n                      className=\"subtitle is-6\"\n                    >\n                      {article.author.username}\n                    </Link>\n                  </h2>\n                  {article.author.username === user.username ? (\n                    <Link to={`/editArticle/${article.slug}`}>Edit</Link>\n                  ) : (\n                    \"\"\n                  )}\n                </div>\n              </div>\n            </section>\n            <section className=\"base column is-8 is-offset-2\">\n              <div className=\"content is-medium\">\n                <p className=\"article-main media\">{article.body}</p>\n              </div>\n\n              <div className=\"tags\">\n                {article.tagList ? (\n                  article.tagList.map((tag, i) => {\n                    return (\n                      <span key={i} className=\"tag\">\n                        {tag}\n                      </span>\n                    );\n                  })\n                ) : (\n                  <></>\n                )}\n              </div>\n              <hr />\n            </section>\n          </>\n        ) : (\n          <>\n            <section className=\"hero is-small is-success is-bold\">\n              <div className=\"hero-body\">\n                <div className=\"container hero-container\">\n                  <h1>Loading...</h1>\n                </div>\n              </div>\n            </section>\n          </>\n        )}\n        <section className=\"column is-6 is-offset-3\">\n          {localStorage.token?(\n\n          <article class=\"media\">\n            <div class=\"media-content\">\n              <div class=\"field\">\n                <p class=\"control\">\n                  <textarea\n                    class=\"textarea\"\n                    onChange={this.handleChange}\n                    value={this.state.body}\n                    name=\"body\"\n                    placeholder=\"Add a comment...\"\n                  >\n                    {body}\n                  </textarea>\n                </p>\n              </div>\n              <nav class=\"level\">\n                <div class=\"level-left\">\n                  <div class=\"level-item\">\n                    <button class=\"button is-info\" onClick={this.postComent}>\n                      Submit\n                    </button>\n                  </div>\n                </div>\n              </nav>\n            </div>\n          </article>\n          ):(\n            \"\"\n          )}\n        </section>\n        <section className=\"column is-6 is-offset-3\">\n          {comments\n            ? comments.reverse().map((comment, i) => (\n                <article key={i} className=\"media comment-box\">\n                  <div className=\"media-content\">\n                    <div className=\"field\">\n                      <p className=\"control\">\n                        <textarea\n                          style={{ border: \"none\" }}\n                          className=\"textarea old-comment\"\n                          value={comment.body}\n                          placeholder=\"Add a comment...\"\n                          rows=\"3\"\n                          readOnly\n                        />\n                      </p>\n                    </div>\n                    <nav className=\"level comment-footer\">\n                      <div className=\"level-left\">\n                        <div className=\"media commnet-media\">\n                          <div className=\"media-left\">\n                            <figure className=\"image is-32x32\">\n                              <img\n                                className=\" is-responsive is-rounded\"\n                                src={\n                                  comment.author.image ||\n                                  \"https://bulma.io/images/placeholders/96x96.png\"\n                                }\n                                alt=\"author avatar\"\n                              />\n                            </figure>\n                          </div>\n                          <div className=\"v-center media-content is-small\">\n                            <Link\n                              to={{\n                                pathname: \"/authorProfile\",\n                                state: {\n                                  username: comment.author.username\n                                }\n                              }}\n                              className=\"green-text\"\n                            >\n                              <span className=\"green-text\">\n                                {comment.author.username}\n                              </span>\n                            </Link>\n                            <span className=\"thin-text\">\n                              <em>{Date(comment.createdAt).slice(0, 15)}</em>\n                            </span>\n                          </div>\n                        </div>\n                      </div>\n                      {/* {comment.author.username === currentUser ? (\n                      <div className=\"level-right\">\n                        <div className=\"level-item\">\n                          <div className=\"level-item\">\n                            <button\n                              className=\"button is-text\"\n                              onClick={() => this.deleteCommnt(id)}\n                            >\n                              <span className=\"icon is-small\">\n                                <i className=\"fas fa-trash-alt\" />\n                              </span>\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                    ) : (\n                      <></>\n                    )} */}\n                      <div className=\"level-right\">\n                        <div className=\"level-item\">\n                          <div className=\"level-item\">\n                            <button\n                              className=\"button is-text\"\n                              onClick={() => this.handleDelete(comment.id)}\n                            >\n                              <span className=\"icon is-small\">\n                                <i className=\"fas fa-trash-alt\" />\n                              </span>\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                    </nav>\n                  </div>\n                </article>\n              ))\n            : \"\"}\n        </section>\n      </>\n    );\n  }\n}\n\nexport default SingleArt;\n"]},"metadata":{},"sourceType":"module"}